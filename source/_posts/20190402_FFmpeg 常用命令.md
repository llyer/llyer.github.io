---
title: FFmpeg 常用命令
date: 2019-04-02 14:24:47
tags:
        - FFmpeg
        - 视频
        - 工具
---

[FFmpeg](https://zh.wikipedia.org/wiki/FFmpeg) 是一个自由软件，可以运行音频和视频多种格式的录影、转换、流功能，包含了libavcodec——这是一个用于多个项目中音频和视频的解码器库，以及libavformat——一个音频与视频格式转换库。

“FFmpeg”这个单词中的“FF”指的是“Fast Forward（快速前进）”。有些新手写信给“FFmpeg”的项目负责人，询问FF是不是代表“Fast Free”或者“Fast Fourier”等意思，“FFmpeg”的项目负责人回信说：“Just for the record, the original meaning of "FF" in FFmpeg is "Fast Forward"...”

#### 动图转图片序列

逐帧输出，将视频的所有帧输出到制定文件夹，例如一秒 `24` 帧，视频一共 `10` 秒，输出后就是 `24*10=240` 帧
```sh
ffmpeg -i input.gif /images/image_%04d.png
```

#### 动图转视频
```sh
ffmpeg -i input.gif -vf scale=420:-2,format=yuv420p out.mp4
```

#### 视频，GIF添加水印
```sh
ffmpeg  -i input.gif -vf "drawtext=fontfile=simhei.ttf: text='你的水印':x=600:y=330:fontsize=18:fontcolor=yellow:shadowy=2" manu.gif
```

#### 视频转图片序列
```sh
ffmpeg -i "cut01.mp4" ./cut01/image_%04d.png
```

#### 合并音频和视频
```sh
ffmpeg -i video.mp4 -i audio.m4a -acodec copy -vcodec copy output.mp4
```

#### 截取视频中的一段
```sh
ffmpeg  -i ./input.mp4 -vcodec copy -acodec copy -ss 00:00:10 -to 00:00:15 ./cut01.mp4 -y
```
参考链接：https://www.cnblogs.com/wainiwann/p/6972954.html
        


#### 裁剪视频
裁剪视频的大小，一定要指定码率

```sh
ffmpeg -i cutout1.mp4 -strict -2 -vf crop=400:720:400:0 -b 10M out2.mp4
```

#### 图片序列转视频
第一个 -r 指的是帧数，-b 指的是码率  -s 是分辨率

```sh
FFMPEG -r 10 -i ./image_%04d.jpg -s 640x640 -b 10M -vcodec mpeg4 ./video.mp4

FFMPEG -r 10 
        -i ./image_%04d.jpg 
        -s 640x640 
        -b 10M 
        -vcodec mpeg4 ./video.mp4
```

#### 制作模糊背景
适合横屏视频和竖屏视频之间的转换

```sh
ffmpeg -i ~/test/objectC/bbs.chinaffmpeg.com孙悟空.mp4 -filter_complex "[0:v]avgblur=sizeX=64:sizeY=0[out1];[0:v]scale=480x320[out2];[out1][out2]overlay=x=320:y=240[outo]" -map '[outo]' -y  /root/bbs.chinaffmpeg.com孙悟空.mp4
```

~

***